@using Oprim.Application.Interfaces
@inject NavigationManager Navigation
@inject IPermissionService PermissionService

@if (_authorized)
{
    @ChildContent
}
else
{
    <h3 class="text-danger text-center mt-5">ğŸš« Ø´Ù…Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯</h3>
}

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }

    private bool _authorized;

    protected override async Task OnInitializedAsync()
    {
        var path = new Uri(Navigation.Uri).AbsolutePath;
        _authorized = await PermissionService.HasPermissionForPage(path);
    }

}